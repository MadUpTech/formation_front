<div class="container__create_module">
	<div class="__form__module">
		<form *ngIf="isModal" [formGroup]="formModule" (ngSubmit)="handleModule()">
			<div class="titre">
				<span class="span">Nouveau Module</span>
			</div>
			<div class="form-group">
				<label for="">Code:</label>
				<input disabled class="form-control" type="number" [value]="codeModule" placeholder="Code">
			</div>
			<div class="form-group">
				<label for="">Nom:</label>
				<input class="form-control" type="text" [placeholder]="'Ex: Module '+codeModule" formControlName="nom">
				<small *ngIf="formModule.controls['nom'].errors && formModule.controls['nom'].touched"
					class="text-danger">Remplir le champ</small>
			</div>
			<div class="button">
				<button [disabled]="formModule.invalid" class="btn btn-primary btn-sm" type="submit">Enregister</button>
				<button class="btn btn-danger btn-sm" (click)="desactiverModal()">Annuler</button>
			</div>
		</form>
	</div>
	<div class="__form__create__file">
		<div class="isTable" *ngIf="!isModal">
			<table class="table">
				<thead>
					<tr>
						<th>#</th>
						<th>Module</th>
						<th>Action</th>
					</tr>
				</thead>
				<tbody>
					<tr *ngFor="let item of modules; let i=index">
						<td>{{i + 1}}</td>
						<td>{{item.nom}}</td>
						<td>
							<button class="btn btn-sm btn-danger">Supprimer</button>
						</td>
					</tr>
				</tbody>
			</table>
		</div>
		<form *ngIf="!isModal" [formGroup]="formFichier" (ngSubmit)="ajouterFileBy()">
			<div class="loading" *ngIf="isLoading">
				<div class="spinner-grow text-primary loader" style="width: 3rem; height:3rem;" role="status">
					<span class="visually-hidden"></span>
				</div>
				<div class="spinner-grow text-primary loader" style="width: 3rem; height:3rem;" role="status">
					<span class="visually-hidden"></span>
				</div>
				<div class="spinner-grow text-primary loader" style="width: 3rem; height:3rem;" role="status">
					<span class="visually-hidden"></span>
				</div>
			</div>
			<div class="title">
				<span class="span__title">Insertion Fihier</span>
				<img (click)="openModal()" title="new module" src="./../../../assets/images/new.png" width="25px"
					height="25px" alt="">
			</div>
			<div class="form-group">
				<label for="">Module:</label>
				<select formControlName="idModule" class="form-select">
					<option *ngFor="let item of modules" [value]="item.id">{{item.nom}}</option>
				</select>
			</div>
			<div class="form-group">
				<label for="">Type:</label>
				<select name="" id="" formControlName="type" class="form-select">
					<option value="audio">Audio</option>
					<option value="document">Document</option>
					<option value="video">Video</option>
				</select>
			</div>
			<div class="form-group">
				<input type="file" (change)="onSelectFile($event)" class="form-control" formControlName="isFile">
				<small *ngIf="isVerification" class="text-danger">{{isVerification}}</small>

			</div>
			<div class="form-group button">
				<button [disabled]="formFichier.invalid" class="btn btn-primary" type="submit">Ok</button>
			</div>
		</form>
	</div>
</div>